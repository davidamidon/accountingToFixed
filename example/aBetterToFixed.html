<script src="../simpleTest.js"></script>
<script>

// Function
function aBetterToFixed(value, precision) {
  // Create Variables
  var decimalPlacesToMove = 2;
  var valueSplit;
  var decimal;
  var valueLength;
  var decimalPosition;
  var beforeDecimal;
  var afterDecimal;
  var valueEnd;
  var newString;
  var rounded;

  // Check if value is a string and if not convert it to one.
  if(typeof value !== "string") {
    value.toString();
  }

  // Perform operation against the string value.
  valueSplit = value.split('');
  decimal = value.match(/\./g);
  valueLength = value.length;

  // Loop over the value string to find the decimal.
  for(i = 0; i < valueSplit.length; i++) {
    if(valueSplit[i].match(/\./g)) {
      // Store the position of the decimal.
      decimalPosition = i;
    }
  }

  // Work on the string to move the decimal the required number of positions.
  beforeDecimal = value.substring(0, decimalPosition);
  afterDecimal = value.substring(decimalPosition + 1, decimalPosition + 1 + precision);
  valueEnd = value.substring(decimalPosition + precision + 1, value.length);
  newString = beforeDecimal + afterDecimal + decimal + valueEnd;

  // Round the new number.
  rounded = Math.round(newString);

  // Reverse the string
  roundedString = rounded.toString();
  roundedSplit = roundedString.split('');
  roundedLength = roundedSplit.length;

  // Work on the string to move the decimal the required number of positions.
  roundedBeforeDecimal = roundedString.substring(0, roundedSplit.length - precision);
  roundedAfterDecimal = roundedString.substring(roundedSplit.length - precision, roundedSplit.length);
  finalNumber = roundedBeforeDecimal + decimal + roundedAfterDecimal;

  console.log(finalNumber);
}

/*

function betterToFixed(value, precision) {
  var exponentialForm = Number(value + 'e' + precision);
  var rounded = Math.round(exponentialForm);
  var finalResult = Number(rounded + 'e-' + precision);
  return finalResult.toFixed(precision);
}

*/

// Objects for testing


// Tests
tests({
  'It should move the decimal to the right two places.': function() {
    eq(aBetterToFixed('122.255', 1), '12225.5');
    eq(aBetterToFixed('0.615', 2), '061.5');
    eq(aBetterToFixed('10.235', 3), '1023.5');
    eq(aBetterToFixed('1.005', 3), '100.5');
  }
});
</script>
